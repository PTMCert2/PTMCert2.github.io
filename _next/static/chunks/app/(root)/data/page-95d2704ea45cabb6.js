(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{5197:function(e,t,a){Promise.resolve().then(a.bind(a,8054))},8054:function(e,t,a){"use strict";a.r(t),a.d(t,{DataTable:function(){return p}});var s=a(3827),i=a(2148),r=a(1885),n=a(2256),l=a.n(n),c=a(4090),o=a(1991),d=a(8879),u=a(1333),h=a(8620).Buffer;async function f(e){let t=await fetch("https://api.github.com/repos/PTMCert2/data/commits?path="+e,{headers:[["Accept","application/vnd.github+json"],["X-GitHub-Api-Version","2022-11-28"]]});return(await t.json()).map(t=>({date:t.commit.author.date,hash:t.sha,month:e}))}let m=(0,o.Ry)().shape({name:(0,o.Z_)().required(),surname:(0,o.Z_)().notRequired(),email:(0,o.Z_)().required(),phone:(0,o.Z_)().notRequired(),message:(0,o.Z_)().required(),ip:(0,o.Z_)().required(),date:(0,o.Z_)().required()});async function x(e,t,a,s){let i="".concat(t,"/").concat(a),r=localStorage.getItem(i);if(null===r)try{let t=await fetch("https://raw.githubusercontent.com/PTMCert2/data/".concat(i),{headers:[["Accept","application/vnd.github.raw"]]}),a=await t.text(),r=await (0,d.p)(a,s),n=JSON.parse(h.from(r.plaintext).toString("utf8"));if(n.date=e,!m.validateSync(n))return;return localStorage.setItem(i,JSON.stringify(n)),n}catch(e){return}return JSON.parse(r)}function p(){let[e,t]=(0,c.useState)(),[a,n]=(0,c.useState)([]);return((0,c.useEffect)(()=>{localStorage&&t(localStorage.getItem("pKey"))},[]),(0,c.useEffect)(()=>{async function t(e){let t=[(0,i.Z)((0,r.Z)(new Date,0),"yyMM"),(0,i.Z)((0,r.Z)(new Date,1),"yyMM"),(0,i.Z)((0,r.Z)(new Date,2),"yyMM")],a=l()(2);for(let e=localStorage.length;e>0;--e)t.some(t=>{var a;return null===(a=localStorage.key(e))||void 0===a?void 0:a.endsWith("/"+t)})||"pKey"===localStorage.key(e)||localStorage.removeItem(localStorage.key(e));let s=(await Promise.all(t.map(e=>a(f,e)))).flat();console.log(s);let c=(await Promise.all(s.map(t=>a(x,t.date,t.hash,t.month,e)))).filter(e=>void 0!==e);console.log(c),n(c)}"string"==typeof e&&t(e)},[e]),null===e)?(0,s.jsx)("main",{className:"fixed inset-0 flex flex-col items-center justify-center",children:(0,s.jsx)("input",{className:"rounded-md border-2 p-1",type:"file",onChange:e=>{var a;let s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(s){let e=new FileReader;e.readAsText(s,"UTF-8"),e.onload=e=>{var a,s;let i=null===(s=e.target)||void 0===s?void 0:null===(a=s.result)||void 0===a?void 0:a.toString();i&&(localStorage.setItem("pKey",i),t(i))}}}})}):void 0===e||0===a.length?(0,s.jsx)("main",{className:"fixed inset-0 flex flex-col items-center justify-center",children:(0,s.jsx)("div",{className:"h-16 w-64",children:(0,s.jsx)(u.fP,{className:"animate-pulse fill-yellow-400",innerClassName:"fill-black"})})}):(0,s.jsx)("main",{className:"flex items-center justify-center bg-slate-100",children:(0,s.jsx)("div",{className:"flex min-h-screen items-center justify-center px-2 py-4",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full overflow-hidden rounded-3xl bg-white shadow-md",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-slate-300 text-slate-700",children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Дата"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"IP"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Ім'я"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Прізвище"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Email"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Телефон"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Повідомлення"})]})}),(0,s.jsx)("tbody",{className:"text-slate-900",children:a.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-slate-200",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:e.date}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-800",children:e.ip})}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.name}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.surname}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.email}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.phone}),(0,s.jsx)("td",{className:"px-4 py-3",children:e.message})]},t))})]})})})})}},8879:function(e,t,a){"use strict";a.d(t,{H:function(){return r},p:function(){return n}});var s=a(272),i=a(8620).Buffer;async function r(e){let t=await (0,s.js)("-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAt3k1ebixsZhoxvnT74B+pCw7iZVmxdEkrJE/9ejZ5aMAOG/QxG6ItYJXXjAENgKO6xdaLlWUaf0TsfZhSGVXHQGGniPbYqcUIgJVnq/Zs6fbC+eiJMiszc0FBm4snsE3/kH4KHzEfGPmNQ6Ch7uEbLt0JrSDKVzC8tcvEhYoUwb54wdgp9rEUFFGi2nuNiC6kK8vCAfJRgWTgDfKsV1DpMSRjLF+fiuzJrQD5Jcbs4FWvOs+Ta95qfJIR8g6dZbJbK9SNM2fAzhqSYondjxelroDGcH86/LA23eygi4UsWQ0BPwR5uiuyaiIwhjtx5XfXwsZX7ojTd53wLpuFIHYPwIDAQAB-----END PUBLIC KEY-----","RSA-OAEP");return await new s.B0(i.from(e)).setProtectedHeader({alg:"RSA-OAEP",enc:"A256GCM"}).encrypt(t)}async function n(e,t){let a=await (0,s.R7)(t,"RSA-OAEP");return await (0,s.AJ)(e,a)}},2256:function(e,t,a){"use strict";let s=a(1995);e.exports=e=>{if(!((Number.isInteger(e)||e===1/0)&&e>0))throw TypeError("Expected `concurrency` to be a number from 1 and up");let t=new s,a=0,i=()=>{a--,t.size>0&&t.dequeue()()},r=async function(e,t){for(var s=arguments.length,r=Array(s>2?s-2:0),n=2;n<s;n++)r[n-2]=arguments[n];a++;let l=(async()=>e(...r))();t(l);try{await l}catch(e){}i()},n=function(s,i){for(var n=arguments.length,l=Array(n>2?n-2:0),c=2;c<n;c++)l[c-2]=arguments[c];t.enqueue(r.bind(null,s,i,...l)),(async()=>{await Promise.resolve(),a<e&&t.size>0&&t.dequeue()()})()},l=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return new Promise(t=>{n(e,t,...a)})};return Object.defineProperties(l,{activeCount:{get:()=>a},pendingCount:{get:()=>t.size},clearQueue:{value:()=>{t.clear()}}}),l}},1995:function(e){"use strict";class t{constructor(e){this.value=e,this.next=void 0}}class a{enqueue(e){let a=new t(e);this._head?this._tail.next=a:this._head=a,this._tail=a,this._size++}dequeue(){let e=this._head;if(e)return this._head=this._head.next,this._size--,e.value}clear(){this._head=void 0,this._tail=void 0,this._size=0}get size(){return this._size}*[Symbol.iterator](){let e=this._head;for(;e;)yield e.value,e=e.next}constructor(){this.clear()}}e.exports=a}},function(e){e.O(0,[640,333,971,69,744],function(){return e(e.s=5197)}),_N_E=e.O()}]);