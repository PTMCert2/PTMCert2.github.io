(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[207],{4213:function(e,t,s){Promise.resolve().then(s.bind(s,171))},171:function(e,t,s){"use strict";s.r(t),s.d(t,{Form:function(){return j}});var r=s(3827),a=s(4773),o=s(3835),n=s(4102),i=s(7957),l=s(2936),c=s(6480),d=s.n(c),p=s(2148),u=s(1885),m=s(8792),h=s(4090),x=s(2670),f=s(7809),g=s(1991),b=s(8879);async function y(e,t){return(await fetch(e,t)).json()}var w=s(8620).Buffer;function j(){var e,t,s,a,o;let{data:n}=(0,f.ZP)("https://api.ipify.org?format=json",y,{fallbackData:{ip:"no_ip"},dedupingInterval:12e5,revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnMount:!1,revalidateOnReconnect:!0,onSuccess:e=>{console.log("IP updated",e),j("ip",{defaultValue:e.ip})}}),l=(0,g.Ry)().shape({name:(0,g.Z_)().required("Вкажіть Ваше і'мя"),surname:(0,g.Z_)(),email:(0,g.Z_)().email("Некоректний формат").required("Вкажіть електронну пошту"),phone:(0,g.Z_)(),message:(0,g.Z_)().required("Чим саме ми Вам можемо допомогти?"),ip:(0,g.Z_)().required()}).required(),{register:c,handleSubmit:m,resetField:j,formState:{errors:v}}=(0,x.cI)({resolver:(0,i.X)(l)});async function N(e){var t;let s,r;C("process"),console.log(e,"start");let a=(0,p.Z)((0,u.Z)(new Date,0),"yyMM");try{s=await fetch("https://api.github.com/repos/PTMCert2/data/git/trees/main",{headers:[["Accept","application/vnd.github+json"],["X-GitHub-Api-Version","2022-11-28"]],method:"GET",cache:"no-store"})}catch(e){C("error");return}if(s.status>=200&&s.status<300){C("error");return}let o=null===(t=(await s.json()).tree.find(e=>e.path===a))||void 0===t?void 0:t.sha,n=await (0,b.H)(JSON.stringify(e)),i={content:w.from(n).toString("base64"),message:"_",sha:o},l="Be"+["r","a"].sort((e,t)=>e.charCodeAt(0)-t.charCodeAt(0)).join("")+"er g"+["p","h"].sort((e,t)=>e.charCodeAt(0)-t.charCodeAt(0)).join("")+"_XPoE"+["q","A"].sort((e,t)=>e.charCodeAt(0)-t.charCodeAt(0)).join("")+"T7dSidun9e0Y6UxHhlsOqHhb4MPED4";try{r=await fetch("https://api.github.com/repos/PTMCert2/data/contents/"+a,{headers:[["Accept","application/vnd.github+json"],["Authorization",l],["X-GitHub-Api-Version","2022-11-28"]],method:"PUT",body:JSON.stringify(i)})}catch(e){C("error");return}if(r.status>=200&&r.status<300){C("error");return}C("ok"),console.log(r,"finish")}let[A,C]=(0,h.useState)("none");return(0,r.jsxs)("form",{className:"grid w-full grid-cols-2 gap-5 gap-x-10 rounded-3xl bg-slate-100 p-12 text-xl",onSubmit:m(N),children:[(0,r.jsxs)("div",{className:"-mt-5 flex flex-col",children:[(0,r.jsx)("input",{className:d()("peer w-full rounded-md border px-2 py-1 transition-colors duration-700",{"border-pink-800 bg-pink-100/60":v.name,"border-slate-400":!v.name}),placeholder:"Ім'я *",...c("name")}),(0,r.jsx)("p",{className:"order-first text-sm opacity-100 transition-all duration-700 peer-placeholder-shown:opacity-0",children:"Ім'я"}),(0,r.jsx)("p",{className:d()("h-5 text-sm text-pink-800 transition-all duration-700",{"opacity-100":v.name,"opacity-0":!v.name}),children:null===(e=v.name)||void 0===e?void 0:e.message})]}),(0,r.jsxs)("div",{className:"-mt-5 flex flex-col",children:[(0,r.jsx)("input",{className:d()("peer w-full rounded-md border px-2 py-1 transition-colors duration-700",{"border-pink-800 bg-pink-100/60":v.surname,"border-slate-400":!v.surname}),placeholder:"Прізвище",...c("surname")}),(0,r.jsx)("p",{className:"order-first text-sm opacity-100 transition-all duration-700 peer-placeholder-shown:opacity-0",children:"Прізвище"}),(0,r.jsx)("p",{className:d()("h-5 text-sm text-pink-800 transition-all duration-700",{"opacity-100":v.surname,"opacity-0":!v.surname}),children:null===(t=v.surname)||void 0===t?void 0:t.message})]}),(0,r.jsxs)("div",{className:"-mt-5 flex flex-col",children:[(0,r.jsx)("input",{className:d()("peer w-full rounded-md border px-2 py-1 transition-colors duration-700",{"border-pink-800 bg-pink-100/60":v.email,"border-slate-400":!v.email}),placeholder:"Електронна пошта *",...c("email")}),(0,r.jsx)("p",{className:"order-first text-sm opacity-100 transition-all duration-700 peer-placeholder-shown:opacity-0",children:"Електронна пошта"}),(0,r.jsx)("p",{className:d()("h-5 text-sm text-pink-800 transition-all duration-700",{"opacity-100":v.email,"opacity-0":!v.email}),children:null===(s=v.email)||void 0===s?void 0:s.message})]}),(0,r.jsxs)("div",{className:"-mt-5 flex flex-col",children:[(0,r.jsx)("input",{className:d()("peer w-full rounded-md border px-2 py-1 transition-colors duration-700",{"border-pink-800 bg-pink-100/60":v.phone,"border-slate-400":!v.phone}),placeholder:"Телефон",...c("phone")}),(0,r.jsx)("p",{className:"order-first text-sm opacity-100 transition-all duration-700 peer-placeholder-shown:opacity-0",children:"Телефон"}),(0,r.jsx)("p",{className:d()("h-5 text-sm text-pink-800 transition-all duration-700",{"opacity-100":v.phone,"opacity-0":!v.phone}),children:null===(a=v.phone)||void 0===a?void 0:a.message})]}),(0,r.jsxs)("div",{className:"col-span-2 -mt-5 flex flex-col",children:[(0,r.jsx)("textarea",{className:d()("peer w-full rounded-md border px-2 py-1 transition-colors duration-700",{"border-pink-800 bg-pink-100/60":v.message,"border-slate-400":!v.message}),placeholder:"Повідомлення *",rows:11,...c("message")}),(0,r.jsx)("p",{className:"order-first text-sm opacity-100 transition-all duration-700 peer-placeholder-shown:opacity-0",children:"Повідомлення"}),(0,r.jsx)("p",{className:d()("h-5 text-sm text-pink-800 transition-all duration-700",{"opacity-100":v.message,"opacity-0":!v.message}),children:null===(o=v.message)||void 0===o?void 0:o.message})]}),(0,r.jsx)("input",{type:"hidden",value:null==n?void 0:n.ip,...c("ip")}),(0,r.jsx)("input",{type:"submit",className:"col-span-2 w-full whitespace-nowrap rounded-md bg-sky-500 px-10 py-4 text-center text-lg font-bold text-white transition-colors hover:bg-sky-700 hover:shadow-md focus:bg-sky-700",value:"Надіслати"}),(0,r.jsx)(k,{stage:A,setStage:C})]})}function k(e){let{stage:t,setStage:s}=e;return(0,r.jsx)(l.fC,{open:"none"!==t,children:(0,r.jsxs)(l.h_,{children:[(0,r.jsx)(l.aV,{className:"fixed inset-0 z-40 bg-slate-700/60"}),(0,r.jsx)(l.VY,{className:"fixed inset-0 z-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"m-4 flex max-w-[32rem] flex-col items-center gap-4 rounded-3xl bg-white p-8",children:["error"===t&&(0,r.jsx)(a.Z,{className:"h-24 w-24 stroke-orange-500 stroke-2"}),"ok"===t&&(0,r.jsx)(o.Z,{className:"h-24 w-24 stroke-green-500 stroke-2"}),"process"===t&&(0,r.jsx)(n.Z,{className:"h-24 w-24 animate-[spin_1.5s_ease-in-out_infinite] stroke-slate-500 stroke-2"}),(0,r.jsxs)(l.Dx,{className:"text-xl font-semibold",children:["error"===t&&"Сталася помилка","ok"===t&&"Дані успішно відпавлено!","process"===t&&"Відправляємо дані..."]}),(0,r.jsxs)(l.dk,{children:["error"===t&&"Спробуйте надіслати ще раз трохи пізніше або скористайтесь електронною поштою contact@ptmcert.com.ua","ok"===t&&"Ми зв'яжемося з вами найближчим часом."]}),"error"===t&&(0,r.jsx)("button",{className:"w-full self-stretch whitespace-nowrap rounded-md bg-sky-500 px-10 py-4 text-center text-lg font-bold text-white transition-colors hover:bg-sky-700 focus:bg-sky-700 lg:w-auto",onClick:()=>{s("none")},children:"Ок"}),"ok"===t&&(0,r.jsx)(m.default,{className:"w-full self-stretch whitespace-nowrap rounded-md bg-sky-500 px-10 py-4 text-center text-lg font-bold text-white transition-colors hover:bg-sky-700 focus:bg-sky-700 lg:w-auto",href:"/ua/",children:"Повенутися на головну"})]})})]})})}},8879:function(e,t,s){"use strict";s.d(t,{H:function(){return o},p:function(){return n}});var r=s(272),a=s(8620).Buffer;async function o(e){let t=await (0,r.js)("-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAt3k1ebixsZhoxvnT74B+pCw7iZVmxdEkrJE/9ejZ5aMAOG/QxG6ItYJXXjAENgKO6xdaLlWUaf0TsfZhSGVXHQGGniPbYqcUIgJVnq/Zs6fbC+eiJMiszc0FBm4snsE3/kH4KHzEfGPmNQ6Ch7uEbLt0JrSDKVzC8tcvEhYoUwb54wdgp9rEUFFGi2nuNiC6kK8vCAfJRgWTgDfKsV1DpMSRjLF+fiuzJrQD5Jcbs4FWvOs+Ta95qfJIR8g6dZbJbK9SNM2fAzhqSYondjxelroDGcH86/LA23eygi4UsWQ0BPwR5uiuyaiIwhjtx5XfXwsZX7ojTd53wLpuFIHYPwIDAQAB-----END PUBLIC KEY-----","RSA-OAEP");return await new r.B0(a.from(e)).setProtectedHeader({alg:"RSA-OAEP",enc:"A256GCM"}).encrypt(t)}async function n(e,t){let s=await (0,r.R7)(t,"RSA-OAEP");return await (0,r.AJ)(e,s)}}},function(e){e.O(0,[250,941,640,18,317,971,69,744],function(){return e(e.s=4213)}),_N_E=e.O()}]);